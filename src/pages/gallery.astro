---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getSiteSettings, getGalleryImages } from '../lib/firestore.js';
const site = await getSiteSettings();
const dynamicImages = await getGalleryImages();

// Static fallback gallery
const staticGallery = [
  { src: '/images/gallery/cedar-shadowbox.jpg', alt: 'Cedar shadowbox fence', type: 'Cedar', label: 'Cedar Shadowbox' },
  { src: '/images/gallery/cedar-lattice-shadowbox.jpg', alt: 'Cedar lattice top', type: 'Cedar', label: 'Lattice Top' },
  { src: '/images/gallery/vinyl-white.jpg', alt: 'White vinyl fence', type: 'Vinyl', label: 'Vinyl Privacy White' },
  { src: '/images/gallery/vinyl-tan-privacy.jpg', alt: 'Tan vinyl fence', type: 'Vinyl', label: 'Vinyl Privacy Tan' },
  { src: '/images/gallery/aluminum-black.jpg', alt: 'Black aluminum fence', type: 'Aluminum', label: 'Aluminum Ornamental' },
  { src: '/images/gallery/aluminum-ornamental.jpg', alt: 'Aluminum pool fence', type: 'Aluminum', label: 'Pool Fence' },
  { src: '/images/gallery/pt-privacy.jpg', alt: 'Wood privacy fence', type: 'Wood', label: 'PT Privacy' },
  { src: '/images/gallery/pt-shadowbox-lattice.jpg', alt: 'Wood shadowbox', type: 'Wood', label: 'Shadowbox + Lattice' },
  { src: '/images/gallery/chainlink-1.jpg', alt: 'Chain link fence', type: 'Chain Link', label: 'Galvanized' },
  { src: '/images/gallery/split-rail-1.jpg', alt: 'Split rail fence', type: 'Split Rail', label: 'Split Rail' },
];

const gallery = dynamicImages.length > 0 ? dynamicImages : staticGallery;
---

<BaseLayout canonical="/gallery/" title="Project Gallery | Ghareeb Fencing Solutions" description="Browse our fence installation gallery. Cedar, vinyl, aluminum, chain link projects across Toledo OH and SE Michigan.">
  <section class="section" style="padding-top: 60px;">
    <div class="container">
      <div class="section-header">
        <div class="section-label">Our Work</div>
        <h1 style="font-family: var(--font-display); font-size: 2.5rem;">Project <span class="gold">Gallery</span></h1>
        <p style="color: var(--text-muted); max-width: 600px; margin: 12px auto 0;">Real projects from real customers across Northwest Ohio and Southeast Michigan.</p>
      </div>
      <div class="gallery-main">
        {gallery.map((img) => (
          <div class="gallery-card">
            <img src={img.src} alt={img.alt} loading="lazy" />
            <div class="gallery-info">
              <span class="gallery-type">{img.type}</span>
              <span class="gallery-label">{img.label}</span>
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <section class="section cta-section">
    <div class="container">
      <div class="cta-content">
        <h2>Want Your Yard to Look This Good?</h2>
        <p>Get a free quote and let us build you the perfect fence.</p>
        <div class="cta-buttons">
          <a href="/quote/" class="btn btn-primary btn-lg">Get Free Quote</a>
          <a href={`tel:${site.company.phoneRaw}`} class="btn btn-secondary btn-lg">{site.company.phone}</a>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>

<style>
  .gallery-main { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 16px; }
  .gallery-card { border-radius: var(--radius); overflow: hidden; position: relative; aspect-ratio: 4/3; }
  .gallery-card img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.3s; }
  .gallery-card:hover img { transform: scale(1.05); }
  .gallery-info {
    position: absolute; bottom: 0; left: 0; right: 0; padding: 14px;
    background: linear-gradient(transparent, rgba(0,0,0,0.85)); display: flex; justify-content: space-between; align-items: flex-end;
  }
  .gallery-type { font-size: 0.7rem; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; color: var(--accent); }
  .gallery-label { color: white; font-weight: 600; font-size: 0.85rem; }
  @media (max-width: 600px) { .gallery-main { grid-template-columns: 1fr 1fr; } }
</style>
