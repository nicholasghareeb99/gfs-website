---
import BaseLayout from '../../layouts/BaseLayout.astro';
import ContactForm from '../../components/ContactForm.astro';
import { getContactInfo, getSiteSettings } from '../../lib/firestore.js';

const contactData = await getContactInfo();
const site = await getSiteSettings();
const { hours, emergencyContact, responseTime, seo } = contactData;
---

<BaseLayout 
    title={seo?.title || "Contact Us | Ghareeb Fencing Solutions"}
    description={seo?.description || "Get in touch with Toledo's trusted fence contractor. Free estimates, quick response times. Call (419) 902-8257 or submit our online form."}
    canonical="/contact/"
>
    <!-- Hero -->
    <section class="contact-hero">
        <div class="container">
            <nav class="breadcrumb">
                <a href="/">Home</a>
                <span>/</span>
                <span>Contact</span>
            </nav>
            <h1 data-editable data-edit-doc="content/contact" data-edit-field="pageTitle">Contact Us</h1>
            <p class="hero-subtitle" data-editable data-edit-doc="content/contact" data-edit-field="pageSubtitle">We'd love to hear from you. Get in touch today!</p>
        </div>
    </section>

    <!-- Contact Grid -->
    <section class="section">
        <div class="container">
            <div class="contact-grid">
                <!-- Contact Info -->
                <div class="contact-info">
                    <h2>Get In Touch</h2>
                    <p>Ready to start your fence project? Have questions? We're here to help.</p>
                    
                    <div class="contact-methods">
                        <a href={`tel:${site.company.phoneRaw}`} class="contact-method">
                            <div class="method-icon">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="24" height="24"><path d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72c.127.96.361 1.903.7 2.81a2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0122 16.92z"/></svg>
                            </div>
                            <div>
                                <span class="method-label">Phone</span>
                                <span class="method-value">{site.company.phone}</span>
                            </div>
                        </a>
                        
                        <a href={`mailto:${site.company.email}`} class="contact-method">
                            <div class="method-icon">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="24" height="24"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
                            </div>
                            <div>
                                <span class="method-label">Email</span>
                                <span class="method-value">{site.company.email}</span>
                            </div>
                        </a>
                        
                        <div class="contact-method">
                            <div class="method-icon">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="24" height="24"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/><circle cx="12" cy="10" r="3"/></svg>
                            </div>
                            <div>
                                <span class="method-label">Service Area</span>
                                <span class="method-value">{site.company.address.region}</span>
                            </div>
                        </div>
                    </div>

                    <!-- Hours -->
                    {hours && (
                        <div class="hours-box">
                            <h3>Business Hours</h3>
                            <ul>
                                {hours.weekday && <li><span>Monday - Friday:</span> <span>{hours.weekday}</span></li>}
                                {hours.saturday && <li><span>Saturday:</span> <span>{hours.saturday}</span></li>}
                                {hours.sunday && <li><span>Sunday:</span> <span>{hours.sunday}</span></li>}
                            </ul>
                            {responseTime && <p class="response-note">{responseTime}</p>}
                        </div>
                    )}

                    <!-- Quick Links -->
                    <div class="quick-links">
                        <a href="/quote/ballpark/" class="btn btn-primary btn-block">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>
                            Get Instant Quote
                        </a>
                        <a href="/service-areas/" class="btn btn-secondary btn-block">
                            View Service Areas
                        </a>
                    </div>
                </div>

                <!-- Contact Form -->
                <div class="contact-form-wrapper">
                    <h2>Send Us a Message</h2>
                    <p>Fill out the form below and we'll get back to you within 24 hours.</p>
                    <ContactForm />
                </div>
            </div>
        </div>
    </section>

    <!-- FAQ Section -->
    <section class="section bg-light">
        <div class="container">
            <div class="section-header text-center">
                <h2>Frequently Asked Questions</h2>
            </div>
            <div class="faq-grid">
                <details class="faq-item">
                    <summary>How do I get a free estimate?</summary>
                    <p>You can get a free estimate by calling us at {site.company.phone}, filling out our contact form, or using our instant quote tool for a ballpark estimate right now.</p>
                </details>
                <details class="faq-item">
                    <summary>What areas do you serve?</summary>
                    <p>We serve all of Northwest Ohio and Southeast Michigan, including Toledo, Perrysburg, Maumee, Sylvania, and many more communities. Check our service areas page for the full list.</p>
                </details>
                <details class="faq-item">
                    <summary>How quickly can you start my project?</summary>
                    <p>During peak season, our typical lead time is 1-2 weeks. However, we can often accommodate urgent projects. Contact us to discuss your timeline.</p>
                </details>
                <details class="faq-item">
                    <summary>Do you handle permits?</summary>
                    <p>Yes! We research permit requirements for your municipality and can assist with the application process. Check our permits page for local requirements.</p>
                </details>
            </div>
        </div>
    </section>
</BaseLayout>

<style>
    .contact-hero {
        background: linear-gradient(135deg, var(--primary), var(--primary-dark));
        padding: 140px 0 60px;
        color: white;
    }
    .breadcrumb { display: flex; gap: 8px; margin-bottom: 20px; font-size: 0.9rem; }
    .breadcrumb a { color: rgba(255,255,255,0.7); text-decoration: none; }
    .breadcrumb span { color: rgba(255,255,255,0.5); }
    .breadcrumb span:last-child { color: white; }
    .contact-hero h1 { font-size: clamp(2rem, 4vw, 3rem); margin-bottom: 12px; }
    .hero-subtitle { font-size: 1.2rem; color: rgba(255,255,255,0.9); }

    .contact-grid {
        display: grid;
        grid-template-columns: 400px 1fr;
        gap: 60px;
        align-items: start;
    }
    @media (max-width: 900px) {
        .contact-grid { grid-template-columns: 1fr; }
    }

    .contact-info h2 { margin-bottom: 12px; }
    .contact-info > p { color: var(--text-muted); margin-bottom: 24px; }

    .contact-methods { display: flex; flex-direction: column; gap: 16px; margin-bottom: 32px; }
    .contact-method {
        display: flex;
        align-items: center;
        gap: 16px;
        padding: 16px;
        background: #f8fafc;
        border-radius: var(--radius);
        text-decoration: none;
        color: inherit;
        transition: all 0.2s;
    }
    .contact-method:hover { background: var(--primary); color: white; }
    .method-icon {
        width: 48px;
        height: 48px;
        background: var(--primary);
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .contact-method:hover .method-icon { background: white; color: var(--primary); }
    .method-label { display: block; font-size: 0.85rem; color: var(--text-muted); }
    .contact-method:hover .method-label { color: rgba(255,255,255,0.8); }
    .method-value { font-weight: 600; }

    .hours-box {
        background: var(--primary);
        color: white;
        padding: 24px;
        border-radius: var(--radius);
        margin-bottom: 24px;
    }
    .hours-box h3 { color: var(--accent); margin-bottom: 16px; }
    .hours-box ul { list-style: none; padding: 0; margin: 0; }
    .hours-box li { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid rgba(255,255,255,0.2); }
    .hours-box li:last-child { border-bottom: none; }
    .response-note { margin-top: 16px; padding-top: 16px; border-top: 1px solid rgba(255,255,255,0.2); font-size: 0.9rem; opacity: 0.9; }

    .quick-links { display: flex; flex-direction: column; gap: 12px; }
    .btn-block { width: 100%; justify-content: center; }

    .contact-form-wrapper {
        background: white;
        padding: 40px;
        border-radius: var(--radius-lg);
        box-shadow: var(--shadow-md);
    }
    .contact-form-wrapper h2 { margin-bottom: 8px; }
    .contact-form-wrapper > p { color: var(--text-muted); margin-bottom: 24px; }

    .faq-grid { max-width: 800px; margin: 0 auto; }
    .faq-item {
        background: white;
        border-radius: var(--radius);
        margin-bottom: 12px;
        overflow: hidden;
    }
    .faq-item summary {
        padding: 20px 24px;
        cursor: pointer;
        font-weight: 600;
        list-style: none;
    }
    .faq-item summary::-webkit-details-marker { display: none; }
    .faq-item p { padding: 0 24px 20px; margin: 0; color: var(--text-muted); }
</style>
